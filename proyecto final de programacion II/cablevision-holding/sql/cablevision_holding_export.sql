-- H2 2.1.214;
;             
CREATE USER IF NOT EXISTS "SA" SALT 'bc4a38677137e41e' HASH '8329c7a5f16701e421be2333d054016b87b29e52513d8dd2682d12e81f2a1e28' ADMIN;         
CREATE CACHED TABLE "PUBLIC"."AREA_MERCADO"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 33) NOT NULL,
    "DESCRIPCION" CHARACTER VARYING(255),
    "NOMBRE" CHARACTER VARYING(255)
);    
ALTER TABLE "PUBLIC"."AREA_MERCADO" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_1" PRIMARY KEY("ID"); 
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.AREA_MERCADO;            
INSERT INTO "PUBLIC"."AREA_MERCADO" VALUES
(1, U&'Servicios de internet, telefon\00eda y televisi\00f3n por cable', 'Telecomunicaciones'),
(2, 'Plataformas de contenido digital y entretenimiento', 'Streaming y Entretenimiento'),
(3, U&'Tecnolog\00eda financiera y medios de pago', 'Fintech');       
CREATE CACHED TABLE "PUBLIC"."ASESOR"(
    "CODIGO_ASESOR" CHARACTER VARYING(255),
    "TITULACION" CHARACTER VARYING(255),
    "ID" BIGINT NOT NULL
);   
ALTER TABLE "PUBLIC"."ASESOR" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_7" PRIMARY KEY("ID");       
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.ASESOR;  
INSERT INTO "PUBLIC"."ASESOR" VALUES
('AS001', 'MBA en Telecomunicaciones', 5),
('AS002', 'Lic. en Marketing Digital', 6);  
CREATE CACHED TABLE "PUBLIC"."ASESOR_EMPRESA_AREA"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 33) NOT NULL,
    "FECHA_INICIO" DATE,
    "AREA_MERCADO_ID" BIGINT,
    "ASESOR_ID" BIGINT,
    "EMPRESA_ID" BIGINT
);  
ALTER TABLE "PUBLIC"."ASESOR_EMPRESA_AREA" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_B" PRIMARY KEY("ID");          
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.ASESOR_EMPRESA_AREA;     
INSERT INTO "PUBLIC"."ASESOR_EMPRESA_AREA" VALUES
(1, DATE '2023-01-10', 1, 5, 1),
(2, DATE '2023-03-20', 2, 6, 2);         
CREATE CACHED TABLE "PUBLIC"."CAPTACION"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 33) NOT NULL,
    "FECHA_CAPTACION" DATE,
    "VENDEDOR_ID" BIGINT,
    "VENDEDOR_CAPTADO_ID" BIGINT
);             
ALTER TABLE "PUBLIC"."CAPTACION" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4" PRIMARY KEY("ID");    
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.CAPTACION;               
INSERT INTO "PUBLIC"."CAPTACION" VALUES
(1, DATE '2023-05-15', 1, 2),
(2, DATE '2023-08-22', 1, 3);         
CREATE CACHED TABLE "PUBLIC"."CUENTAS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "ACTIVA" BOOLEAN NOT NULL,
    "FECHA_CREACION" TIMESTAMP(6),
    "NUMERO_CUENTA" CHARACTER VARYING(255) NOT NULL,
    "PIN" CHARACTER VARYING(255) NOT NULL,
    "SALDO" NUMERIC(38, 2) NOT NULL,
    "ULTIMA_ACTUALIZACION" TIMESTAMP(6)
);     
ALTER TABLE "PUBLIC"."CUENTAS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_6" PRIMARY KEY("ID");      
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.CUENTAS; 
INSERT INTO "PUBLIC"."CUENTAS" VALUES
(1, TRUE, TIMESTAMP '2025-11-06 18:32:13.603488', '1234567890', '$2a$10$R2ZWKhXxtbnpkPqvVRBnV.jS9zxT02g.JzsykGULMo2j6OV1dbH7W', 5000.00, TIMESTAMP '2025-11-06 18:32:13.603488'),
(2, TRUE, TIMESTAMP '2025-11-06 18:32:13.88612', '9876543210', '$2a$10$qzxItT40rQPkoSTpDFJgnupvW2.BVcqMvEv83pXEaSUqPf3wsieDK', 10000.00, TIMESTAMP '2025-11-06 18:32:13.88612');    
CREATE CACHED TABLE "PUBLIC"."DISPENSADORES"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 2) NOT NULL,
    "ACTIVO" BOOLEAN NOT NULL,
    "CODIGO" CHARACTER VARYING(255) NOT NULL,
    "SALDO_DISPONIBLE" NUMERIC(38, 2) NOT NULL,
    "ULTIMA_RECARGA" TIMESTAMP(6),
    "VERSION" BIGINT
);          
ALTER TABLE "PUBLIC"."DISPENSADORES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_60" PRIMARY KEY("ID");               
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.DISPENSADORES;           
INSERT INTO "PUBLIC"."DISPENSADORES" VALUES
(1, TRUE, 'ATM001', 50000.00, TIMESTAMP '2025-11-06 18:32:13.176928', 0);        
CREATE CACHED TABLE "PUBLIC"."EMPRESA_AREA_MERCADO"(
    "EMPRESA_ID" BIGINT NOT NULL,
    "AREA_MERCADO_ID" BIGINT NOT NULL
);            
ALTER TABLE "PUBLIC"."EMPRESA_AREA_MERCADO" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_6B" PRIMARY KEY("EMPRESA_ID", "AREA_MERCADO_ID");             
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.EMPRESA_AREA_MERCADO;    
INSERT INTO "PUBLIC"."EMPRESA_AREA_MERCADO" VALUES
(1, 1),
(2, 2),
(3, 1); 
CREATE CACHED TABLE "PUBLIC"."EMPRESA_PAIS_OPERACION"(
    "EMPRESA_ID" BIGINT NOT NULL,
    "PAIS_ID" BIGINT NOT NULL
);  
ALTER TABLE "PUBLIC"."EMPRESA_PAIS_OPERACION" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5" PRIMARY KEY("EMPRESA_ID", "PAIS_ID");    
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.EMPRESA_PAIS_OPERACION;  
INSERT INTO "PUBLIC"."EMPRESA_PAIS_OPERACION" VALUES
(1, 1),
(2, 1),
(3, 2);               
CREATE CACHED TABLE "PUBLIC"."PAIS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 33) NOT NULL,
    "CAPITAL" CHARACTER VARYING(255),
    "NOMBRE" CHARACTER VARYING(255),
    "NUMERO_HABITANTES" BIGINT,
    "PIB" FLOAT(53)
);         
ALTER TABLE "PUBLIC"."PAIS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2" PRIMARY KEY("ID");         
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.PAIS;    
INSERT INTO "PUBLIC"."PAIS" VALUES
(1, 'Buenos Aires', 'Argentina', 45195777, 6.37485E11),
(2, 'Brasilia', 'Brasil', 215313498, 3.608438E12),
(3, 'Santiago', 'Chile', 19458310, 3.17057E11);              
CREATE CACHED TABLE "PUBLIC"."TRANSACCIONES"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "DESCRIPCION" CHARACTER VARYING(255),
    "EXITOSA" BOOLEAN NOT NULL,
    "FECHA" TIMESTAMP(6) NOT NULL,
    "MONTO" NUMERIC(38, 2) NOT NULL,
    "TIPO" CHARACTER VARYING(255) NOT NULL,
    "CUENTA_ID" BIGINT NOT NULL
);               
ALTER TABLE "PUBLIC"."TRANSACCIONES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_B77" PRIMARY KEY("ID");              
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.TRANSACCIONES;           
CREATE CACHED TABLE "PUBLIC"."USUARIO"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 33) NOT NULL,
    "DIRECCION" CHARACTER VARYING(255),
    "NOMBRE" CHARACTER VARYING(255)
);           
ALTER TABLE "PUBLIC"."USUARIO" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_22" PRIMARY KEY("ID");     
-- 6 +/- SELECT COUNT(*) FROM PUBLIC.USUARIO; 
INSERT INTO "PUBLIC"."USUARIO" VALUES
(1, 'Av. Corrientes 1234, CABA', U&'Carlos Rodr\00edguez'),
(2, 'Av. Santa Fe 5678, CABA', U&'Mar\00eda Gonz\00e1lez'),
(3, 'Av. Rivadavia 9876, CABA', U&'Luis P\00e9rez'),
(4, U&'Av. Col\00f3n 456, C\00f3rdoba', U&'Ana Mart\00ednez'),
(5, 'Av. Libertador 2468, CABA', 'Dr. Roberto Silva'),
(6, 'Av. 9 de Julio 1357, CABA', U&'Lic. Patricia L\00f3pez'); 
CREATE CACHED TABLE "PUBLIC"."VENDEDOR"(
    "CODIGO_VENDEDOR" CHARACTER VARYING(255),
    "ID" BIGINT NOT NULL,
    "EMPRESA_ID" BIGINT,
    "VENDEDOR_SUPERIOR_ID" BIGINT
);           
ALTER TABLE "PUBLIC"."VENDEDOR" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_B0" PRIMARY KEY("ID");    
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.VENDEDOR;
INSERT INTO "PUBLIC"."VENDEDOR" VALUES
('CV001', 1, 1, NULL),
('CV002', 2, 1, 1),
('CV003', 3, 1, 1),
('FL001', 4, 2, NULL);              
CREATE CACHED TABLE "PUBLIC"."EMPRESA"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 33) NOT NULL,
    "FACTURACION_ANUAL" FLOAT(53),
    "FECHA_ENTRADA_HOLDING" DATE,
    "NOMBRE" CHARACTER VARYING(255),
    "NUMERO_VENDEDORES" INTEGER,
    "PAIS_SEDE_ID" BIGINT,
    "CIUDAD_SEDE" CHARACTER VARYING(255)
);    
ALTER TABLE "PUBLIC"."EMPRESA" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_C" PRIMARY KEY("ID");      
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.EMPRESA; 
INSERT INTO "PUBLIC"."EMPRESA" VALUES
(1, 2.5E9, DATE '2010-03-15', U&'Cablevisi\00f3n Argentina', 150, 1, 'Buenos Aires'),
(2, 8.0E8, DATE '2015-07-22', 'Flow Entertainment', 75, 1, U&'C\00f3rdoba'),
(3, 1.2E9, DATE '2018-11-08', 'Telecom Brasil', 200, 2, U&'S\00e3o Paulo');       
ALTER TABLE "PUBLIC"."TRANSACCIONES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_B7" CHECK("TIPO" IN('RETIRO', 'DEPOSITO', 'CONSULTA_SALDO')) NOCHECK;
ALTER TABLE "PUBLIC"."CUENTAS" ADD CONSTRAINT "PUBLIC"."UK_7H7MQVCAU3MCL0MBRKDRT7FNH" UNIQUE("NUMERO_CUENTA");
ALTER TABLE "PUBLIC"."VENDEDOR" ADD CONSTRAINT "PUBLIC"."FKQQCOM25TPV25055WBF14B4H0E" FOREIGN KEY("VENDEDOR_SUPERIOR_ID") REFERENCES "PUBLIC"."VENDEDOR"("ID") NOCHECK;       
ALTER TABLE "PUBLIC"."EMPRESA_PAIS_OPERACION" ADD CONSTRAINT "PUBLIC"."FKLTKQ6T838273WROY9FJOC5CY5" FOREIGN KEY("EMPRESA_ID") REFERENCES "PUBLIC"."EMPRESA"("ID") NOCHECK;    
ALTER TABLE "PUBLIC"."VENDEDOR" ADD CONSTRAINT "PUBLIC"."FK56H6EUQF4JA8OTHS7UMYDY9" FOREIGN KEY("ID") REFERENCES "PUBLIC"."USUARIO"("ID") NOCHECK;            
ALTER TABLE "PUBLIC"."EMPRESA_AREA_MERCADO" ADD CONSTRAINT "PUBLIC"."FKQHWJR03JSUWRHFJU5OI5RPNHC" FOREIGN KEY("AREA_MERCADO_ID") REFERENCES "PUBLIC"."AREA_MERCADO"("ID") NOCHECK;            
ALTER TABLE "PUBLIC"."ASESOR" ADD CONSTRAINT "PUBLIC"."FK86EQPYSL1BKYBYNGJ6ARKLHYL" FOREIGN KEY("ID") REFERENCES "PUBLIC"."USUARIO"("ID") NOCHECK;            
ALTER TABLE "PUBLIC"."CAPTACION" ADD CONSTRAINT "PUBLIC"."FKPFGAXL7EGXABEY6O846I77NVQ" FOREIGN KEY("VENDEDOR_CAPTADO_ID") REFERENCES "PUBLIC"."VENDEDOR"("ID") NOCHECK;       
ALTER TABLE "PUBLIC"."ASESOR_EMPRESA_AREA" ADD CONSTRAINT "PUBLIC"."FKN6Y8N9YKYRHKQTPSRG2UXT9F6" FOREIGN KEY("ASESOR_ID") REFERENCES "PUBLIC"."ASESOR"("ID") NOCHECK;         
ALTER TABLE "PUBLIC"."EMPRESA" ADD CONSTRAINT "PUBLIC"."FK9JYLG188D2OF3B5QQH5PKP9B1" FOREIGN KEY("PAIS_SEDE_ID") REFERENCES "PUBLIC"."PAIS"("ID") NOCHECK;    
ALTER TABLE "PUBLIC"."VENDEDOR" ADD CONSTRAINT "PUBLIC"."FKSQ3I5PS68RVBSRO2XIKWNB1T1" FOREIGN KEY("EMPRESA_ID") REFERENCES "PUBLIC"."EMPRESA"("ID") NOCHECK;  
ALTER TABLE "PUBLIC"."EMPRESA_PAIS_OPERACION" ADD CONSTRAINT "PUBLIC"."FK5G032BB8EKVW7H5YEBP7CAXMO" FOREIGN KEY("PAIS_ID") REFERENCES "PUBLIC"."PAIS"("ID") NOCHECK;          
ALTER TABLE "PUBLIC"."EMPRESA_AREA_MERCADO" ADD CONSTRAINT "PUBLIC"."FKP8NNTL9C9MUIYMMI5V6YBMJSF" FOREIGN KEY("EMPRESA_ID") REFERENCES "PUBLIC"."EMPRESA"("ID") NOCHECK;      
ALTER TABLE "PUBLIC"."CAPTACION" ADD CONSTRAINT "PUBLIC"."FK5A5CSUJN4OB85YWHF5AYV7KG9" FOREIGN KEY("VENDEDOR_ID") REFERENCES "PUBLIC"."VENDEDOR"("ID") NOCHECK;               
ALTER TABLE "PUBLIC"."TRANSACCIONES" ADD CONSTRAINT "PUBLIC"."FKRO225X7C3IYV2TB5U7P2V4UHE" FOREIGN KEY("CUENTA_ID") REFERENCES "PUBLIC"."CUENTAS"("ID") NOCHECK;              
ALTER TABLE "PUBLIC"."ASESOR_EMPRESA_AREA" ADD CONSTRAINT "PUBLIC"."FKL9GJNB6P5UWG0CFHDB62KJI2U" FOREIGN KEY("EMPRESA_ID") REFERENCES "PUBLIC"."EMPRESA"("ID") NOCHECK;       
ALTER TABLE "PUBLIC"."ASESOR_EMPRESA_AREA" ADD CONSTRAINT "PUBLIC"."FK97BUR7OU933UOA45HOHK7QDVQ" FOREIGN KEY("AREA_MERCADO_ID") REFERENCES "PUBLIC"."AREA_MERCADO"("ID") NOCHECK;             
